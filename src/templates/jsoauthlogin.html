<html>
<head>
<meta name="google-signin-client_id" content="933060102795-0hf4m6v3cuq4ocvubaide7ouqui2l4lg.apps.googleusercontent.com">
</head>
<body>
helop
<script src="https://apis.google.com/js/platform.js" async defer></script>



<div class="g-signin2" data-onsuccess="onSignIn"></div>



<script>
console.log('antes del script')
function onSignIn(googleUser) {
    console.log('dentro del script')
    var profile = googleUser.getBasicProfile();
    console.log('ID: ' + profile.getId()); 
    console.log('Name: ' + profile.getName());
    console.log('Image URL: ' + profile.getImageUrl());
    console.log('Email: ' + profile.getEmail()); 
    console.log('Enviando mensaje...')
    var id_token = googleUser.getAuthResponse().id_token;    
    var xhr = new XMLHttpRequest();
    xhr.open('POST', 'http://dominioppr.com:5000/jsoauthdata/');
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onload = function() {
      console.log('Signed in as: ' + xhr.responseText);
    };
    xhr.send('idtoken=' + id_token);
}
</script>

<button type="button" onclick="signOut();">Sign Out</button>
<button type="button" onclick="signOut2();">Sign Out 2</button>
<script>
console.log('antes de funcion signout')
function signOut() 
{
    console.log('dentro funcion signout')
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
        console.log('User signed out.');
    });
}

function signOut2()
{
    googleAuth=gapi.auth2.getAuthInstance();
    console.log('success?')
    googleAuth.disconnect();
}
</script>

</body>
</html>
